var FASHIONADE=function($w){var $=function(e){return document.querySelector(e)},$$=function(e){return document.querySelectorAll(e)},get=function(url,cb){var xmlhttp;xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&cb(eval(xmlhttp.responseText))},xmlhttp.open("GET",url,!0),xmlhttp.send()},strTitle=function(e){for(var a="",n=0,t=e.length;n<t;++n)a+='<li class="'+(0===n?"on":"")+'">'+e[n].name+"</li>";return'<ul class="fashionade--recommendTitleList">'+a+"</ul>"},strContent=function(e,a){for(var n="",t=0,o=e.length;t<o;++t)n+="<li>"+("overlay"===a?strmainImage(e[t].images):"")+strItems(e[t].items)+"</li>";return'<ul class="fashionade--recommendContentList">'+n+"</ul>"},strmainImage=function(e){for(var a="",n=0,t=e.length;n<t;++n)a+='<li class="'+(0===n?"on":"")+'" style="background-image:url(\''+e[n]+"')\" onMouseOver=\"FASHIONADE.RECOMMEND_MAINIMAGE(this, '"+e[n]+"')\"></li>";return'<div class="fashionade--mainImageWrap">           <ul class="fashionade--mainImageThumbList">'+a+'</ul>           <div class="fashionade--mainImage"><img src="'+e[0]+'" width="283" height="424" alt="" /></div>           </div>'},strItems=function(e){for(var a="",n=0,t=e.length;n<t;++n)a+='<li class="fashionade--item">         <div class="fashionade--thumb" style="background-image:url(\''+e[n].imageUrl+'\')"></div>         <div class="fashionade--content">           <dl>             <dt class="fashionade--brand">'+e[n].brand+'</dt>             <dd class="fashionade--name">'+e[n].name+"</dd>           </dl>         </div>       </li>";return'<div class="fashionade--itemList"><ul>'+a+"</ul></div>"},RECOMMEND={INDEX:1,LAYER_INDEX:1,DATA:null,direct:function(e){RECOMMEND.show(RECOMMEND.INDEX+=e)},current:function(e){RECOMMEND.show(RECOMMEND.INDEX=e)},show:function(e){var a=$$(".fashionade--renderWrap .fashionade--recommendTitleList > li"),n=$$(".fashionade--renderWrap .fashionade--recommendContentList > li");e>n.length&&(RECOMMEND.INDEX=1),e<1&&(RECOMMEND.INDEX=n.length);for(var t=0,o=n.length;t<o;++t)n[t].style.display="none",a[t].className="";n[RECOMMEND.INDEX-1].style.display="block",a[RECOMMEND.INDEX-1].className="on"},layer_direct:function(e){RECOMMEND.layer_show(RECOMMEND.LAYER_INDEX+=e)},layer_current:function(e){RECOMMEND.layer_show(RECOMMEND.LAYER_INDEX=e)},layer_show:function(e){var a=$$(".fashionade--layerWrap .fashionade--recommendTitleList > li"),n=$$(".fashionade--layerWrap .fashionade--recommendContentList > li");e>n.length&&(RECOMMEND.LAYER_INDEX=1),e<1&&(RECOMMEND.LAYER_INDEX=n.length);for(var t=0,o=n.length;t<o;++t)n[t].style.display="none",a[t].className="";n[RECOMMEND.LAYER_INDEX-1].style.display="block",a[RECOMMEND.LAYER_INDEX-1].className="on"},layer_remove:function(){$('[data-fashionade-render-recommend-type="overlay"]').innerHTML=""},showMainImage:function(e,a){for(var n=e.parentNode.getElementsByTagName("li"),t=new Image,o=0,i=n.length;o<i;++o)n[o].className="";e.className="on",t.onload=function(){e.parentNode.parentNode.childNodes[3].childNodes[0].src=a},t.src=a}},getMadUuid=function(){if(localStorage.getItem("madUuid"))return localStorage.getItem("madUuid");var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var a=16*Math.random()|0;return("x"==e?a:3&a|8).toString(16)}));return localStorage.setItem("madUuid",e),e},config={apiUrl:"https://dev.fashionade.ai:3000/api/v1/recommend-products",apiParams:{productId:location.pathname.split("/")[3]||"",madUuid:getMadUuid(),userId:"",appKey:"fashionade_test_9sdf9d8f982394hds9fhs9h923a"}},utils={jsonToParams:function(e){var a="?";for(var n in e)a+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return a.substring(0,a.length-1)}};return document.addEventListener("DOMContentLoaded",(function(){get(config.apiUrl+utils.jsonToParams(config.apiParams),(function(e){e.length>0&&($('[data-fashionade-render-recommend-type="overlay"]')&&$('[data-fashionade-open-layer="recommend"]')&&($('[data-fashionade-open-layer="recommend"]').onclick=function(){$('[data-fashionade-render-recommend-type="overlay"]').innerHTML='<div class="fashionade--layerWrap"><div class="fashionade--layerInnerWrap">'+strTitle(e)+strContent(e,"overlay")+'<button class="fashionade--btn fashionade--prev" onClick="FASHIONADE.RECOMMEND_LAYER_DIRECT(-1)">이전 추천보기</button>                             <button class="fashionade--btn fashionade--next" onClick="FASHIONADE.RECOMMEND_LAYER_DIRECT(1)">다음 추천보기</button>                             <button class="fashionade--btn fashionade--close" onClick="FASHIONADE.RECOMMEND_LAYER_REMOVE()">닫기</button>                             </div></div>                             <div class="fashionade--dimmed"></div>'}),$('[data-fashionade-render-recommend-type="render"]')&&($('[data-fashionade-render-recommend-type="render"]').innerHTML='<div class="fashionade--renderWrap">'+strTitle(e)+strContent(e)+'<button class="fashionade--btn fashionade--prev" onClick="FASHIONADE.RECOMMEND_DIRECT(-1)">이전 추천보기</button>                         <button class="fashionade--btn fashionade--next" onClick="FASHIONADE.RECOMMEND_DIRECT(1)">다음 추천보기</button>                         </div>'))}))})),{$:$,$$:$$,get:get,RECOMMEND_DATA:RECOMMEND.DATA,RECOMMEND_DIRECT:RECOMMEND.direct,RECOMMEND_LAYER_DIRECT:RECOMMEND.layer_direct,RECOMMEND_LAYER_REMOVE:RECOMMEND.layer_remove,RECOMMEND_LAYER_MAINIMAGE:RECOMMEND.layer_showMainImage}}(window);
